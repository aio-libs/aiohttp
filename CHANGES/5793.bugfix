Properly adhere to timeout passed to ws_connect

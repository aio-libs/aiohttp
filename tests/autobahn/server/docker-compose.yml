version: "3.9"
services:
  autobahn:
    image: aiohttp-autobahn_autobahn
    volumes:
      - type: bind
        source: ./fuzzingclient.json
        target: /config/fuzzingclient.json
      - type: bind
        source: ../reports
        target: /reports
    command: ["/bin/bash", "wait-for-it", "aiohttp:9001", "--", "/usr/local/bin/wstest", "--mode", "fuzzingclient", "--spec", "/config/fuzzingclient.json"]

  aiohttp:
    image: aiohttp-autobahn_aiohttp
    command: ["python", "tests/autobahn/server/server.py"]

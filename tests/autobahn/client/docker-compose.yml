version: "3.9"
services:
  autobahn:
    build:
      context: ..
      args:
        USER_ID: ${USER_ID}
    volumes:
      - type: bind
        source: ./fuzzingserver.json
        target: /config/fuzzingserver.json
      - type: bind
        source: ../reports
        target: /reports

  aiohttp:
    build:
      context: ../../..
      dockerfile: tests/autobahn/client/Dockerfile
    command: ["wait-for-it", "autobahn:9001", "--", "python", "tests/autobahn/client/client.py"]
